<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>File Organizer Pro ‚Äî Download</title>
  <meta name="description" content="Smart file organizer that watches your Downloads, batches images, previews instantly, and shows live stats. Download for Windows or macOS directly from GitHub Releases." />
  <meta name="theme-color" content="#070a10" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800&display=swap" rel="stylesheet" />
  <style>
    :root{
      --bg:#070a10; --bg-2:#0a0f1a; --panel:#0c1220; --glass:rgba(255,255,255,.06);
      --text:#eaf0f7; --muted:#a8b3c6; --line:rgba(255,255,255,.12);
      --acc1:#7c59ff; --acc2:#00e5a8; --acc3:#ff6bd6;
      --glow1:rgba(124,89,255,.45); --glow2:rgba(0,229,168,.35); --glow3:rgba(255,107,214,.35)
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:'Outfit',system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif}
    a{color:inherit;text-decoration:none}

    /* Background: Aurora + Grid + Particles + Spotlight */
    .stage{position:fixed;inset:0;z-index:-3;background:
      radial-gradient(1200px 800px at 30% -10%,#10172a 0%,transparent 60%),
      radial-gradient(900px 600px at 120% 100%,#0c1324 0%,transparent 60%)}
    .aurora{position:absolute;inset:-15%;filter:blur(60px);opacity:.6;mix-blend-mode:screen;animation:aurora 18s ease-in-out infinite}
    .aurora::before,.aurora::after{content:"";position:absolute;width:60vmax;height:60vmax;border-radius:50%}
    .aurora::before{background:radial-gradient(circle at 30% 30%,var(--acc1),transparent 60%);top:-10%;left:-5%;animation:float 22s infinite ease-in-out}
    .aurora::after{background:radial-gradient(circle at 70% 50%,var(--acc2),transparent 60%);bottom:-10%;right:-5%;animation:float 28s infinite ease-in-out reverse}
    .grid{position:absolute;inset:0;background:
      linear-gradient(to right, rgba(255,255,255,.04) 1px, transparent 1px),
      linear-gradient(to bottom, rgba(255,255,255,.04) 1px, transparent 1px);
      background-size:40px 40px;mask-image:radial-gradient(ellipse at 50% 20%, #000 35%, transparent 75%);
      transform:translateZ(0);animation:gridmove 36s linear infinite;opacity:.35}
    canvas#bg-canvas{position:fixed;inset:0;z-index:-2}
    .spot{position:fixed;inset:0;pointer-events:none;background:
      radial-gradient(600px 400px at var(--mx,50%) var(--my,50%),rgba(124,89,255,.12),transparent 60%)}

    @keyframes aurora{0%,100%{transform:translateY(0)}50%{transform:translateY(2%)}}
    @keyframes float{0%,100%{transform:translate(0,0)}50%{transform:translate(30px,-20px)}}
    @keyframes gridmove{from{background-position:0 0,0 0}to{background-position:220px 0,0 220px}}

    /* Sticky Glass Header */
    header{position:sticky;top:0;backdrop-filter:blur(10px);
      background:linear-gradient(180deg,rgba(9,13,25,.7),rgba(9,13,25,.35));border-bottom:1px solid var(--line);z-index:10}
    .wrap{max-width:1180px;margin:0 auto;padding:14px 20px;display:flex;align-items:center;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:12px;min-width:0}

    /* Logo (uses your app image inside neon frame) */
    .logo{position:relative;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0;width:48px;height:48px;border-radius:14px;background:#0c1220;border:1px solid rgba(255,255,255,.12);box-shadow:0 0 26px var(--glow1), inset 0 0 18px rgba(255,255,255,.06);overflow:hidden}
    .logo::before{content:"";position:absolute;inset:-2px;border-radius:inherit;background:conic-gradient(var(--acc1),var(--acc3),var(--acc2),var(--acc1));filter:blur(.6px);opacity:.35;animation:spin 12s linear infinite}
    .logo::after{content:"";position:absolute;inset:6px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.1)}
    .logo img{position:relative;z-index:1;width:76%;height:76%;object-fit:contain;filter:drop-shadow(0 0 6px rgba(124,89,255,.3))}
    @keyframes spin{to{transform:rotate(360deg)}}

    .name{font-weight:800;letter-spacing:.3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    nav a{opacity:.85;padding:8px 10px;border-radius:8px}
    nav a:hover{opacity:1;background:rgba(255,255,255,.06)}

    /* Hero */
    .hero{max-width:1180px;margin:0 auto;padding:54px 20px 30px;display:grid;grid-template-columns:1.1fr .9fr;gap:34px;align-items:center}
    @media (max-width:980px){.hero{grid-template-columns:1fr;text-align:center}}
    .title{font-size:clamp(30px,4.2vw,60px);line-height:1.12;margin:0 0 14px;font-weight:800;
      background:linear-gradient(120deg,var(--text) 0%,#d7ddff 35%,#a6ffe9 70%,#ffd6f3 100%);
      -webkit-background-clip:text;background-clip:text;color:transparent;filter:drop-shadow(0 6px 24px rgba(124,89,255,.16));background-size:200% 200%;animation:titleShift 14s ease infinite}
    @keyframes titleShift{0%,100%{background-position:0% 50%}50%{background-position:100% 50%}}
    .subtitle{color:var(--muted);font-size:18px;margin-bottom:18px}

    /* Download Card */
    .card{position:relative;background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));border:1px solid var(--line);
      border-radius:22px;padding:24px;box-shadow:0 14px 60px rgba(0,0,0,.5), 0 0 60px rgba(124,89,255,.12);overflow:hidden;transform-style:preserve-3d}
    .card::before{content:"";position:absolute;inset:-2px;border-radius:24px;padding:2px;background:
      conic-gradient(from var(--a,0deg),var(--acc1),transparent,var(--acc2),transparent,var(--acc3),transparent,var(--acc1));
      -webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);
      -webkit-mask-composite:xor;mask-composite:exclude;opacity:.4;filter:blur(.7px);animation:borderSpin 14s linear infinite}
    @keyframes borderSpin{to{--a:360deg}}

    .dl-grid{display:grid;grid-template-columns:1fr 1fr;gap:18px}
    @media (max-width:520px){.dl-grid{grid-template-columns:1fr}}

    /* Badge ABOVE the button frame */
    .btn-wrap{position:relative;padding-top:10px}
    .btn-wrap .badge{position:absolute;top:-16px;left:12px;background:linear-gradient(135deg,var(--acc2),var(--acc1));
      color:#06101b;font-weight:900;padding:4px 10px;border-radius:999px;font-size:11px;box-shadow:0 8px 20px var(--glow2);pointer-events:none;z-index:2;animation:badgeFloat 5.2s ease-in-out infinite}
    @keyframes badgeFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}

    /* Button: grid layout for perfect icon/text/spinner alignment */
    .btn{
      position:relative;display:grid;grid-template-columns:28px 1fr 16px;align-items:center;gap:12px;
      border:1px solid rgba(255,255,255,.14);
      background:linear-gradient(180deg,rgba(255,255,255,.08),rgba(255,255,255,.02));
      padding:18px;border-radius:16px;color:var(--text);font-weight:800;cursor:pointer;width:100%;min-height:78px;
      transition:box-shadow .6s ease, background .6s ease, transform .6s cubic-bezier(.2,.7,.2,1);
      will-change:transform
    }
    .btn:hover{box-shadow:0 16px 34px rgba(0,0,0,.35),0 0 34px var(--glow1)}
    .btn.win:hover{box-shadow:0 16px 34px rgba(0,0,0,.35),0 0 34px var(--glow2)}
    .btn[disabled]{opacity:.55;pointer-events:none}

    /* Icons: consistent look and alignment */
    .ic{width:28px;height:28px;grid-column:1;justify-self:center;align-self:center;color:#dce3ff;opacity:.95}
    .ic--win path,.ic--mac path{fill:currentColor}

    /* Text */
    .meta{grid-column:2;display:flex;flex-direction:column;line-height:1.15;min-width:0}
    .meta .title-line{font-weight:800;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .meta small{color:var(--muted);font-weight:600;white-space:nowrap}

    /* Spinner: reserved column; hide via visibility to keep alignment */
    .spin{grid-column:3;justify-self:end;width:14px;height:14px;border:2px solid rgba(255,255,255,.25);border-top-color:#fff;border-radius:50%;animation:spin .8s linear infinite}
    .spin.hide{opacity:0;visibility:hidden}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* Slow sheen on hover */
    .btn::after{content:"";position:absolute;inset:0;background:linear-gradient(120deg,transparent,rgba(255,255,255,.18),transparent);transform:translateX(-130%);transition:transform 1.8s ease;pointer-events:none}
    .btn:hover::after{transform:translateX(130%)}

    /* Slower ripple */
    .ripple{position:absolute;border-radius:999px;background:radial-gradient(circle, rgba(255,255,255,.28), transparent 60%);transform:translate(-50%,-50%) scale(.3);animation:rip 1.1s ease-out forwards;width:16px;height:16px;pointer-events:none}
    @keyframes rip{to{opacity:0;transform:translate(-50%,-50%) scale(12)}}

    .ver{margin-top:12px;color:var(--muted);font-size:12px}
    .counts{margin-top:6px;color:#b7ffea;font-weight:700;font-size:12px;opacity:.9}

    /* Right Art */
    .art{position:relative;height:440px;border-radius:22px;border:1px solid var(--line);
      background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,.01));overflow:hidden;transform-style:preserve-3d;transition:transform .6s ease}
    .ring{position:absolute;inset:0;margin:auto;border-radius:50%;width:260px;height:260px;border:2px solid rgba(255,255,255,.1);
      filter:drop-shadow(0 0 30px rgba(124,89,255,.25));animation:ring 12s ease-in-out infinite;transform:translateZ(40px)}
    .ring.r2{width:360px;height:360px;animation-duration:16s;opacity:.7;transform:translateZ(20px)}
    .ring.r3{width:540px;height:540px;animation-duration:20s;opacity:.45;transform:translateZ(0)}
    @keyframes ring{0%,100%{transform:scale(1) translateZ(var(--z,0))}50%{transform:scale(1.06) translateZ(var(--z,0))}}
    .orb{position:absolute;width:140px;height:140px;border-radius:50%;background:
      radial-gradient(circle at 30% 30%,#fff,rgba(255,255,255,0) 60%), radial-gradient(circle,var(--acc3),transparent 62%);filter:blur(.5px);mix-blend-mode:screen;opacity:.85;left:14%;top:16%;animation:float 24s ease-in-out infinite;transform:translateZ(60px)}
    .orb.b{left:auto;right:12%;top:58%;width:180px;height:180px;background:
      radial-gradient(circle at 30% 30%,#fff,rgba(255,255,255,0) 60%), radial-gradient(circle,var(--acc1),transparent 62%);animation-duration:30s;opacity:.75;transform:translateZ(40px)}
    .orb.c{left:26%;top:70%;width:90px;height:90px;background:
      radial-gradient(circle at 30% 30%,#fff,rgba(255,255,255,0) 60%), radial-gradient(circle,var(--acc2),transparent 62%);animation-duration:34s;opacity:.6;transform:translateZ(20px)}

    /* Features with reveal */
    .features{max-width:1180px;margin:14px auto 34px;padding:0 20px;display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    @media (max-width:980px){.features{grid-template-columns:1fr 1fr}}
    @media (max-width:560px){.features{grid-template-columns:1fr}}
    .feat{position:relative;padding:18px;border:1px solid var(--line);border-radius:16px;background:
      linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,.01));
      transition:transform .25s ease, box-shadow .3s ease, border-color .3s ease}
    .feat:hover{transform:translateY(-2px);box-shadow:0 16px 38px rgba(0,0,0,.35), 0 0 34px rgba(124,89,255,.12);border-color:rgba(255,255,255,.2)}
    .feat h3{margin:0 0 6px;font-size:16px}
    .feat p{margin:0;color:var(--muted);font-size:14px}

    footer{max-width:1180px;margin:12px auto 30px;padding:0 20px;color:var(--muted);display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .links{display:flex;gap:14px}
    .links a{opacity:.85}.links a:hover{opacity:1}

    .hidden{display:none !important} /* for badges */
    .reveal{opacity:0;transform:translateY(24px) scale(.98);transition:opacity .6s ease, transform .6s ease}
    .reveal.in{opacity:1;transform:none}

    /* Reduced motion */
    @media (prefers-reduced-motion:reduce){
      .aurora,.grid,.ring,.orb{animation:none}
      .spot{background:none}
      canvas#bg-canvas{display:none}
    }
  </style>
</head>
<body>
  <div class="stage">
    <div class="aurora"></div>
    <div class="grid"></div>
  </div>
  <canvas id="bg-canvas"></canvas>
  <div class="spot"></div>

  <header>
    <div class="wrap">
      <div class="brand">
        <div class="logo" aria-label="File Organizer Pro logo">
          <img src="assets/icon_cropped_128x128.png" alt="App icon" />
        </div>
        <div class="name">File Organizer Pro</div>
      </div>
      <nav class="links">
        <a href="#download">Download</a>
        <a href="#features">Features</a>
        <a id="gh-link" href="https://github.com/m0-0-v1" target="_blank" rel="noopener">GitHub</a>
      </nav>
    </div>
  </header>

  <main class="hero" id="download">
    <section>
      <h1 class="title">Download File Organizer Pro ‚Äî Ultra Dark Neon</h1>
      <p class="subtitle">A smart organizer that watches your Downloads, batches images with smart wait, shows instant previews, and tracks live stats.</p>

      <div class="card reveal tilt">
        <div class="dl-grid">
          <!-- Windows button (static link as requested) -->
          <div class="btn-wrap">
            <span class="badge hidden" id="badge-win">Recommended</span>
            <a id="btn-win" class="btn win magnet" href="https://github.com/mohammedmutafa/FileOrganizer/releases/download/v1.0.0-win/File.Organizer.Pro.2025.Setup.2025.1.0.exe" download data-static="1">
              <svg class="ic ic--win" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M3 3h9v8H3V3zm11 0h7v8h-7V3zM3 13h9v8H3v-8zm11 0h7v8h-7v-8z"/>
              </svg>
              <div class="meta">
                <div class="title-line">Download for Windows</div>
                <small id="size-win">EXE</small>
              </div>
              <span class="spin hide" id="spin-win"></span>
            </a>
          </div>

          <!-- macOS button (static link as requested) -->
          <div class="btn-wrap">
            <span class="badge hidden" id="badge-mac">Recommended</span>
            <a id="btn-mac" class="btn mac magnet" href="https://github.com/mohammedmutafa/FileOrganizer/releases/download/v1.0.0/File.Organizer.Pro.2025-2025.1.0-arm64.dmg" download data-static="1">
              <svg class="ic ic--mac" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M3 5h18v11H3V5zm2 2v7h14V7H5zm-3 11h20v2H2v-2z"/>
              </svg>
              <div class="meta">
                <div class="title-line">Download for macOS</div>
                <small id="size-mac">DMG</small>
              </div>
              <span class="spin hide" id="spin-mac"></span>
            </a>
          </div>
        </div>
        <div class="ver" id="rel-info">Fetching latest release...</div>
        <div class="counts" id="dl-counts"></div>
      </div>
    </section>

    <section class="art reveal tilt" aria-hidden="true">
      <div class="ring" style="--z:60px"></div>
      <div class="ring r2" style="--z:30px"></div>
      <div class="ring r3" style="--z:0px"></div>
      <div class="orb"></div>
      <div class="orb b"></div>
      <div class="orb c"></div>
    </section>
  </main>

  <section class="features" id="features">
    <div class="feat reveal">
      <h3>‚è±Ô∏è Smart Monitoring</h3>
      <p>Watches Downloads and groups incoming images into batches with smart wait for late files.</p>
    </div>
    <div class="feat reveal">
      <h3>üñºÔ∏è Instant Previews</h3>
      <p>Live image previews and smooth thumbnailing for recent copies.</p>
    </div>
    <div class="feat reveal">
      <h3>‚öôÔ∏è Fully Customizable</h3>
      <p>Copy or move, batch size, wait times, parallel processing, and notifications.</p>
    </div>
    <div class="feat reveal">
      <h3>üìä Live Stats & Logs</h3>
      <p>Files copied, folders created, errors, and a neat event log.</p>
    </div>
    <div class="feat reveal">
      <h3>üß† Smart Wait & Stability</h3>
      <p>Verifies file size stability before processing to ensure safe and fast copying.</p>
    </div>
    <div class="feat reveal">
      <h3>üíæ Persistent Settings</h3>
      <p>Saves your preferences in settings.json and restores them on launch.</p>
    </div>
  </section>

  <footer>
    <div>¬© <span id="year"></span> File Organizer Pro</div>
    <div class="links">
      <a href="https://github.com/mohammedmutafa/FileOrganizer/releases" target="_blank" rel="noopener">Releases</a>
      <a href="https://t.me/mox_v1" target="_blank" rel="noopener">Support</a>
    </div>
  </footer>

  <script>
    // ‚Äî‚Äî‚Äî Config ‚Äî‚Äî‚Äî
    const OWNER = 'mohammedmutafa';
    const REPO  = 'FileOrganizer';
    const GH_PROFILE = 'https://github.com/m0-0-v1';
    const API   = `https://api.github.com/repos/${OWNER}/${REPO}/releases/latest`;

    // ‚Äî‚Äî‚Äî Elements ‚Äî‚Äî‚Äî
    document.getElementById('gh-link').href = GH_PROFILE;
    document.getElementById('year').textContent = new Date().getFullYear();
    const btnWin = document.getElementById('btn-win');
    const btnMac = document.getElementById('btn-mac');
    const spinWin = document.getElementById('spin-win');
    const spinMac = document.getElementById('spin-mac');
    const badgeWin = document.getElementById('badge-win');
    const badgeMac = document.getElementById('badge-mac');
    const relInfo = document.getElementById('rel-info');
    const dlCounts = document.getElementById('dl-counts');

    // ‚Äî‚Äî‚Äî Helpers ‚Äî‚Äî‚Äî
    const fmtSize = (bytes) => {
      if (!bytes || bytes <= 0) return '';
      const units = ['B','KB','MB','GB']; let i=0, n=bytes;
      while(n>=1024 && i<units.length-1){ n/=1024; i++; }
      return `${n.toFixed(1)} ${units[i]}`;
    };
    function detectOS(){
      const ua = navigator.userAgent || '';
      const plt = navigator.platform || '';
      if (/Windows/i.test(ua) || /Win/i.test(plt)) return 'windows';
      if (/Mac/i.test(ua) || /Mac/i.test(plt)) return 'mac';
      return 'other';
    }
    function markRecommended(os){
      if (os === 'windows') badgeWin.classList.remove('hidden');
      if (os === 'mac') badgeMac.classList.remove('hidden');
    }
    function disableBtn(el, title){
      el.setAttribute('disabled', 'true');
      el.title = title || '';
    }

    // ‚Äî‚Äî‚Äî Fetch latest GitHub release ‚Äî‚Äî‚Äî
    async function loadLatest(){
      // Static links mode: skip API, keep provided hrefs
      if (btnWin.dataset.static === '1' || btnMac.dataset.static === '1'){
        relInfo.textContent = 'Static links active: Windows ‚Üí v1.0.0-win commits, macOS ‚Üí v1.0.0 commits';
        dlCounts.textContent = '';
        return;
      }
      try{
        const r = await fetch(API, { headers: { 'Accept':'application/vnd.github+json' }});
        if (!r.ok) throw new Error('API error');
        const release = await r.json();

        const exe = release.assets.find(a => /\.exe$/i.test(a.name));
        const dmg = release.assets.find(a => /\.dmg$/i.test(a.name));
        const totalDownloads = release.assets.reduce((s,a)=>s+(a.download_count||0),0);

        if (exe){
          btnWin.href = exe.browser_download_url;
          document.getElementById('size-win').textContent = `EXE ‚Ä¢ ${fmtSize(exe.size)} ‚Ä¢ ${exe.download_count || 0} downloads`;
        } else {
          disableBtn(btnWin, 'Windows build not available yet');
        }

        if (dmg){
          btnMac.href = dmg.browser_download_url;
          document.getElementById('size-mac').textContent = `DMG ‚Ä¢ ${fmtSize(dmg.size)} ‚Ä¢ ${dmg.download_count || 0} downloads`;
        } else {
          disableBtn(btnMac, 'macOS build not available yet');
        }

        relInfo.textContent = `Latest: ${release.tag_name || release.name || ''} ‚Äî ${new Date(release.published_at).toLocaleDateString('en-US')}`;
        dlCounts.textContent = `Total downloads: ${totalDownloads.toLocaleString('en-US')}`;
      } catch(e){
        const fallbackWin = `https://github.com/${OWNER}/${REPO}/releases/latest/download/FileOrganizerPro-Setup.exe`;
        const fallbackMac = `https://github.com/${OWNER}/${REPO}/releases/latest/download/FileOrganizerPro.dmg`;
        btnWin.href = fallbackWin;
        btnMac.href = fallbackMac;
        relInfo.textContent = 'Could not fetch release details. Using fallback direct links.';
      }
    }

    // ‚Äî‚Äî‚Äî Click feedback: spinner + ripple ‚Äî‚Äî‚Äî
    function setupClickFeedback(a, spinner){
      a.addEventListener('click', (e) => {
        if (spinner){ spinner.classList.remove('hide'); setTimeout(() => spinner.classList.add('hide'), 3500); }
        const r = document.createElement('span');
        r.className = 'ripple';
        const rect = a.getBoundingClientRect();
        r.style.left = (e.clientX - rect.left) + 'px';
        r.style.top  = (e.clientY - rect.top) + 'px';
        a.appendChild(r);
        setTimeout(()=> r.remove(), 1200);
      });
    }

    // ‚Äî‚Äî‚Äî 3D Tilt (gentle & slow) ‚Äî‚Äî‚Äî
    function setupTilt(){
      const tilts = document.querySelectorAll('.tilt');
      tilts.forEach(card=>{
        card.style.transition = 'transform .6s cubic-bezier(.2,.7,.2,1)';
        card.addEventListener('pointermove', (e)=>{
          const rect = card.getBoundingClientRect();
          const px = (e.clientX - rect.left) / rect.width - 0.5;
          const py = (e.clientY - rect.top) / rect.height - 0.5;
          card.style.transform = `perspective(900px) rotateX(${(-py*5)}deg) rotateY(${(px*5)}deg) translateZ(0)`;
        });
        card.addEventListener('pointerleave', ()=> card.style.transform = 'none');
      });
    }

    // ‚Äî‚Äî‚Äî Magnetic buttons (gentle & slow) ‚Äî‚Äî‚Äî
    function setupMagnet(){
      const mags = document.querySelectorAll('.magnet');
      mags.forEach(el=>{
        el.style.transition = 'transform .45s cubic-bezier(.2,.7,.2,1)';
        el.addEventListener('pointermove', (e)=>{
          const rect = el.getBoundingClientRect();
          const cx = rect.left + rect.width/2;
          const cy = rect.top + rect.height/2;
          const dx = (e.clientX - cx) / (rect.width/2);
          const dy = (e.clientY - cy) / (rect.height/2);
          el.style.transform = `translate(${dx*4}px, ${dy*4}px)`;
        });
        el.addEventListener('pointerleave', ()=> el.style.transform = 'translate(0,0)');
      });
    }

    // ‚Äî‚Äî‚Äî Scroll reveal ‚Äî‚Äî‚Äî
    function setupReveal(){
      const obs = new IntersectionObserver((entries)=>{
        entries.forEach(en=>{
          if (en.isIntersecting) en.target.classList.add('in');
        });
      }, {threshold:.15, rootMargin:'0px 0px -10%'});
      document.querySelectorAll('.reveal').forEach(el=> obs.observe(el));
    }

    // ‚Äî‚Äî‚Äî Particle canvas ‚Äî‚Äî‚Äî
    function setupParticles(){
      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (reduce) return;
      const canvas = document.getElementById('bg-canvas');
      const ctx = canvas.getContext('2d');
      let dpr = Math.max(1, window.devicePixelRatio || 1);
      let w=0,h=0;
      const particles = [];
      const max = Math.min(90, Math.floor(window.innerWidth/14));
      function resize(){
        w = canvas.width = Math.floor(window.innerWidth * dpr);
        h = canvas.height = Math.floor(window.innerHeight * dpr);
        canvas.style.width = window.innerWidth + 'px';
        canvas.style.height = window.innerHeight + 'px';
      }
      window.addEventListener('resize', resize);
      resize();
      for (let i=0;i<max;i++){
        particles.push({
          x: Math.random()*w, y: Math.random()*h,
          vx: (Math.random()*2-1)*0.28*dpr, vy:(Math.random()*2-1)*0.28*dpr,
          r: (Math.random()*1.6+0.6)*dpr,
          hue: 260 + Math.random()*160
        });
      }
      const mouse = {x:-9999,y:-9999};
      window.addEventListener('pointermove',(e)=>{mouse.x=e.clientX*dpr;mouse.y=e.clientY*dpr;},{passive:true});
      function step(){
        ctx.clearRect(0,0,w,h);
        for (const p of particles){
          p.x += p.vx; p.y += p.vy;
          if (p.x<0||p.x>w) p.vx*=-1;
          if (p.y<0||p.y>h) p.vy*=-1;

          const dx = p.x - mouse.x, dy = p.y - mouse.y;
          const dist = Math.hypot(dx,dy);
          if (dist < 160*dpr){
            p.vx += dx/dist * 0.005*dpr;
            p.vy += dy/dist * 0.005*dpr;
          }

          ctx.beginPath();
          ctx.fillStyle = `hsla(${p.hue},85%,65%,.16)`;
          ctx.arc(p.x, p.y, p.r*2.2, 0, Math.PI*2);
          ctx.fill();
        }
        for (let i=0;i<particles.length;i++){
          for (let j=i+1;j<particles.length;j++){
            const a = particles[i], b = particles[j];
            const dx = a.x-b.x, dy=a.y-b.y;
            const d2 = dx*dx+dy*dy;
            if (d2 < (100*dpr)*(100*dpr)){
              ctx.strokeStyle = 'rgba(180, 200, 255, .06)';
              ctx.lineWidth = 1*dpr/2;
              ctx.beginPath(); ctx.moveTo(a.x, a.y); ctx.lineTo(b.x, b.y); ctx.stroke();
            }
          }
        }
        requestAnimationFrame(step);
      }
      step();
    }

    // ‚Äî‚Äî‚Äî Auto-download (?auto=1) ‚Äî‚Äî‚Äî
    function setupAutoDownload(){
      const params = new URLSearchParams(location.search);
      if (params.get('auto') === '1'){
        const os = detectOS();
        window.addEventListener('load', ()=>{
          const target = (os === 'mac') ? btnMac : btnWin;
          if (target && target.href && target.href !== '#'){ setTimeout(()=>target.click(), 700); }
        });
      }
    }

    // Spotlight follows cursor
    window.addEventListener('pointermove', (e)=>{
      document.documentElement.style.setProperty('--mx', e.clientX+'px');
      document.documentElement.style.setProperty('--my', e.clientY+'px');
    }, {passive:true});

    // ‚Äî‚Äî‚Äî Init ‚Äî‚Äî‚Äî
    markRecommended(detectOS());
    loadLatest();
    setupClickFeedback(btnWin, spinWin);
    setupClickFeedback(btnMac, spinMac);
    setupTilt();
    setupMagnet();
    setupReveal();
    setupParticles();
    setupAutoDownload();
  </script>
</body>
</html>